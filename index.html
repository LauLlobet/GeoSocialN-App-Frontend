<!doctype html>
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1" />
</head>
<body>
<script type="text/javascript" src="http://iioengine.com/js/iioEngine-1.2.2.min.js"></script>
<script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-3.3.0.js"></script>
<script type="text/javascript" src="avoidDraggingAndSelecting.js"></script>

<style>
    image, canvas {
        user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -webkit-touch-callout: none;
        -webkit-user-drag: none;
    }

    @font-face {
        font-family: 'Graublau Web';
        src: url('GraublauWeb.eot');
        src: local('☺︎'),
        url('GraublauWeb.otf') format('opentype');
    }

</style>

<script type="text/javascript">

   DrawSquareApp = function(io){

       var farDiagonalLeftWood;
       var farDiagonalRigtWood;
       var targetWood;
       var leftTargetWood;
       var rightTargetWood;
       var nearLeftWood;
       var nearRightWood;

       var farCoef = 0.3;
       var targetCoef = 0.7;
       var nearCoef = 1.5;

       var woodHeight = 300;
       var woodWidth = 80;

       var centerX = io.canvas.center.x;
       var centerY = io.canvas.center.y;

       var nearOffTheCenter = 100;
       var targetOffTheCenter = 90;
       var farOffTheCenter = 45;

       RandomColour = function(){
           var r = Math.floor(Math.random() * 256);
           var g = Math.floor(Math.random() * 256);
           var b = Math.floor(Math.random() * 256);
           var colour = { r:r,g:g,b:b};
           return colour;
       }

       RandColourStr = function(){
           var colour = RandomColour();
           return ColourStr(colour.r,colour.g,colour.b);
       }

       ColourStr = function(r,g,b){
           return 'rgb('+r+','+g+','+b+')';
       }

       CreateAndAddWood = function(io,x,y,w,h,scale){
           var wood = new iio.Rect(x,y,w*scale,h*scale)
                   .setAlpha(0.3)
                   .enableKinematics()
                   .createWithImage('treeTrunk.png'
                   ,function(){io.addObj(wood)});
           wood.setImgSize(w*scale,h*scale);
         return wood;
       }

       farDiagonalLeftWood = CreateAndAddWood(io,centerX-farOffTheCenter,100,woodWidth,woodHeight,farCoef);
       farDiagonalRigtWood = CreateAndAddWood(io,centerX+farOffTheCenter,100,woodWidth,woodHeight,farCoef);
       targetWood = CreateAndAddWood(io,centerX,200,woodWidth,woodHeight,targetCoef);
       leftTargetWood = CreateAndAddWood(io,centerX-targetOffTheCenter,200,woodWidth,woodHeight,targetCoef);
       rightTargetWood = CreateAndAddWood(io,centerX+targetOffTheCenter,200,woodWidth,woodHeight,targetCoef);
       nearLeftWood = CreateAndAddWood(io,centerX-nearOffTheCenter,300,woodWidth,woodHeight,nearCoef);
       nearRightWood = CreateAndAddWood(io,centerX+nearOffTheCenter,300,woodWidth,woodHeight,nearCoef);

       iio.wood = nearLeftWood;

       nearRightWood.setVel(0.9,0.5);
       nearLeftWood.setVel(-0.4,0.1);

       nearLeftWood.setImgSize(300,500);

       io.setFramerate(40,function(){
            iio.resizeFunction();
           //iio.setTextFunction('--REFRESCA--');
       });

       var text = new iio.Text('Hello iio!!', io.canvas.center)
               .setFont('30px Graublau Web')
               .setTextAlign('center')
               .setFillStyle('black');
       io.addObj(text);
       text.text = "Welcome!";

       iio.setTextFunction = function(inputtext){
         text.text=inputtext;

       }
        var textsize = 30;

       iio.resizeFunction = function(){
           nearLeftWood.setImgSize(nearLeftWood.img.size.x + 1 ,nearLeftWood.img.size.y + 1);
           textsize+= 1/6;
           text.font= textsize +'px Graublau Web'
       }

       var doMouseDown = function(event){
           iio.setTextFunction("QQlicked"+event.pageX);
       }

       io.canvas.addEventListener("mousedown",doMouseDown,false);

   };


   iio.start(DrawSquareApp);
   iio.setTextFunction('------');

 //  disableDragCanvas(iio.canvas);





</script>


</body>
</html>